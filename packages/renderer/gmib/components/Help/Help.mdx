import KeyboardArrowUpIcon from '@mui/icons-material/KeyboardArrowUp';
import KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown';
import KeyboardArrowLeftIcon from '@mui/icons-material/KeyboardArrowLeft';
import MenuIcon from '@mui/icons-material/Menu';
import SaveIcon from '@mui/icons-material/Save';
import LoadIcon from '@mui/icons-material/SystemUpdateAlt';
import SearchIcon from '@mui/icons-material/Search';
import Filter4Icon from '@mui/icons-material/Filter4';
import RefreshIcon from '@mui/icons-material/Refresh';
import BrightnessAutoIcon from '@mui/icons-material/BrightnessAuto';
import LockIcon from '@mui/icons-material/Lock';
import Brightness4Icon from '@mui/icons-material/Brightness4';
import BrightnessHighIcon from '@mui/icons-material/BrightnessHigh';
import AddToQueue from '@mui/icons-material/AddToQueue';
import CloseIcon from '@mui/icons-material/Close';
import LocationOnIcon from '@mui/icons-material/LocationOn';
import TimelineIcon from '@mui/icons-material/Timeline';
import NoteIcon from '@mui/icons-material/Note';
import FileCopyIcon from '@mui/icons-material/FileCopy';
import SmartDisplayIcon from '@mui/icons-material/SmartDisplay';
import DeleteIcon from '@mui/icons-material/Delete';
import PlaylistAddIcon from '@mui/icons-material/PlaylistAdd';
import ClearAllIcon from '@mui/icons-material/ClearAll';
import ShuffleIcon from '@mui/icons-material/Shuffle';
import UploadIcon from '@mui/icons-material/Upload';
import SortIcon from '@mui/icons-material/Sort';
import CachedIcon from '@mui/icons-material/Cached';
import PlayArrowIcon from '@mui/icons-material/PlayArrow';
import SkipNextIcon from '@mui/icons-material/SkipNext';
import StopIcon from '@mui/icons-material/Stop';
import PauseIcon from '@mui/icons-material/Pause';
import PictureInPictureAltIcon from '@mui/icons-material/PictureInPictureAlt';
import ReportIcon from '@mui/icons-material/Report';
import EngineeringIcon from '@mui/icons-material/Engineering';
import LocationSearchingIcon from '@mui/icons-material/LocationSearching';
import { PlayerMappingIcon, AddPlayerIcon } from './items';

# GMIB

### Содержание

1. [О программе](#about)
3. [Активация лицензии](#activation)
4. [Обновление ПО](#update)
5. [Использование программы](#gui)
    1. [Интерфейс](#app-anchor)
    2. [Устройства](#devices-anchor)
        - [Вкладка _Свойства_](#props-anchor)
        - [Вкладка _Телеметрия_](#telemetry-anchor)
        - [Вкладка _Прошивка_](#firmware-anchor)
    3. [Вывод](#output-anchor)
    4. [Автояркость](#autobrightness-anchor)
    5. [Защита от перегрева](#overheat-anchor)
    6. [Журнал](#log-anchor)
    7. [Удаленное управление](#remote-control)
6. [Плеер](#player)
    1. [Вкладка _Воспроизведение_](#playback)
    2. [Диалог добавления медиа-файлов в плейлист](#add-media-dialog)
    3. [Вкладка _Медиатека_](#media)
    4. [Вкладка _Планировщик_](#scheduler)
    5. [Вкладка _Настройки_](#settings)
        - [Параметры плеера](#player-settings)
        - [Параметры дисплея](#display-settings)


## <a id="about"></a> О программе

Название GMIB происходит от начальных букв Graphical User Interface of
<a href="https://ru.wikipedia.org/wiki/Management_Information_Base" target="_blank" rel="noopener noreferrer">Management Information Base</a>
(графический интерфейс для базы управляющей информации). Изначально данное ПО разрабатывалось для
управления периферийным оборудованием производства компании Ната-Инфо, а именно для опроса состояния
оборудования (хранящегося в различных переменных), изменения его параметров, выполнения встроенных
подпрограмм на оборудовании, обновления и записи аппаратного ПО. В качестве сети связи
использовалась промышленная сеть на собственном проприетарном протоколе NiBUS работающем по
стандарту физического уровня для асинхронных интерфейсов RS-485.

Каждый тип оборудования, поддерживающий управление с помощью протокола NiBUS, хранил описание своей
управляющей информации в специальных MIB-файлах с описанием схемы в формате XSD. Для опроса и
управления оборудованием можно было воспользоваться инструментом для командной строки Windows,
указав нужный MIB-файл и требуемую команду, что было несколько неудобно и сложно, особенно для
неподготовленных пользователей. Данная программа позволяла автоматически обнаруживать и
идентифицировать подключенные периферийные устройства, предоставляла удобный интерфейс для
управления ими, была мультиплатформенной и поддерживала основные ОС: Windows, Linux, macOS. В
дальнейшем функционал программы постоянно расширялся и стал поддерживать в том числе и такие функции
как:

- подключение устройств по USB и Ethernet;
- задание параметров (размер, расположение, яркость, адреса устройств) для управления подключенными
  видеоэкранами;
- автоматическое управление яркостью видеоэкранов по показаниям датчиков освещенности или положению
  солнца, с указанием географических координат установленного оборудования;
- периодическое получение и сохранение телеметрии, снижение яркости видеоэкранов при превышении
  критической температуры оборудования;
- автоматический запуск, автообновление, авторизация и аутентификация, удаленное подключение и
  управление;
- поддержка популярных устройств и видеоэкранов сторонних производителей, показ графической
  информации на видеоэкранах, вывод HTML-страниц;
- создание плейлистов с видеоконтентом и воспроизведение видео на экранах;
- планировщик заданий;

Основной режим работы программы — автономный, «настроил и забыл». Оператор подключает оборудование,
задает настройки, включает автозапуск. Далее программа самостоятельно отслеживает текущий статус
оборудования, изменяет параметры согласно заданному плану или в случае нештатных ситуаций.

## <a name="activation"></a> Активация лицензии

Чтобы получить доступ к расширенным возможностям необходимо активировать лицензию на устройстве.
Ключ активации представляет собой строку из цифр и латинских букв длиной 12 символов и разделителей.
Чтобы активировать/проверить активацию выберите в меню _Помощь_ пункт _Лицензия_. Если была произведена
активация, будут видны тип лицензии и частично ключ активации. Также будет доступен пункт меню
_Активировать лицензию_. При его выборе откроется диалог в котором нужно ввести Ваш ключ.
Перед активацией убедитесь, что у Вас есть соединение с сетью Интернет. После успешной активации
Программа автоматически перезапуститься. Если активировать несколько устройств одним ключом, только
последнее устройство будет активировано. При клонировании устройств, также только одно будет иметь
активный статус. 

## <a name="update"></a>Обновление ПО

Убедитесь что у вас есть соединение с Интернетом, откройте программу и выберите в меню _Помощь_
пункт _Проверить обновления_. Если доступна более новая версия программы, вам будет предложено
загрузить обновление. После загрузки обновления программа автоматически перезапустится.
Также Вы можете обновить ПО и на удаленном устройстве [см. Удаленное управление](#remote-control). 

### <a name="app-anchor"></a>Интерфейс

Интерфейс программы выглядит практически одинаково на всех платформах. Если на какой-то платформе
наблюдается отличие, об этом будет упомянуто дополнительно. Видеоплеер открывается в собственном
окне и будет описан отдельно.

> Некоторые элементы интерфейса доступны только для лицензий с определенными планами.

Интерфейс приложения включает в себя _Меню_, _Навигационную панель_ (**<abbr>НП</abbr>**) в левой
части окна и _Рабочее пространство_ (**<abbr>РП</abbr>**) с названием приложения и текущей версией.
**РП** может содержать _Панель инструментов_ (**<abbr>ПИ</abbr>**) и _Вкладки_, а содержание зависит от
выбранного пункта в **НП**. Чтобы понять, за что отвечает та или иная кнопка в **ПИ** достаточно подвести
курсор к выбранной кнопке и прочитать "всплывающую" подсказку.


> Некоторые пункты **НП** или группы свойств могут содержать вложенные списки. Тогда рядом с
> названием пункта или группы отображается символы <KeyboardArrowUpIcon /> или <KeyboardArrowDownIcon />
> кликнув по которым можно свернуть/развернуть вложенный список. Саму **НП** так же можно скрыть/отобразить
> кликнув по символу <KeyboardArrowLeftIcon /> или <MenuIcon />

### <a id="devices-anchor"></a>Устройства

При запуске и в процессе работы приложение будет подключать доступные устройства и устройства
перечисленные в конфигурации экранов и добавлять их в список Устройства в НП. При выборе устройства
в РП могут быть доступны следующие вкладки:

#### <a id="props-anchor"></a>Вкладка _Свойства_

Каждое такое устройство из списка можно выбрать кликнув по нему мышью и в области РП будут
отображаться свойства выбранного устройства, часть из которых можно изменять пользователю.

> Изменение свойств устройства относится к "тонкой" настройке, и должно выполняться
> квалифицированным специалистом. Рядовым пользователям при повседневной эксплуатации обычно не
> требуется изменять эти свойства. Также некоторые свойства, такие как яркость управляются
> централизованно и не должны изменяться для индивидуальных устройств.

Если свойств достаточно много, то они могут быть сгруппированы по группам.

На панели инструментов вкладки Свойства могут быть доступны следующие действия:

<dl>
  <dt> <LoadIcon /> Загрузить свойства из файла.</dt>
  <dd>Загружает сохраненные ранее свойства из указанного файла.</dd>

  <dt> <SaveIcon /> Сохранить выбранные свойства в файл. </dt>
  <dd>Позволяет сохранить все или указанные значения изменяемых свойств в указанный файл.</dd> 

  <dt><RefreshIcon /> Обновить свойства.</dt>
  <dd>Повторно перечитать все свойства с устройства.</dd>

  <dt> <SearchIcon /> Поиск новых устройств</dt>
  <dd>Открывает диалог поиска устройств в сети NIBUS по типу или адресу.</dd>
</dl>

#### <a name="find-anchor"></a>Поиск новых устройств

Диалог _Поиск устройств_ можно вызвать кликнув по символу <SearchIcon /> на
панели инструментов. С его помощью можно найти устройства, подключенные к сети NIBUS по RS-485
интерфейсу. Обычно Ваш компьютер должен быть подключен к общей сети посредством устройства Siolynx.

Поиск устройств можно осуществить по _типу_ или по _адресу_. Если вы подключены к нескольким сетям,
можно выбрать активное _соединение_, либо искать во всех сетях. Если используется поиск по типу
устройства, нужно выбрать искомый тип из выпадающего списка. Если поиск по адресу, то укажите
искомый адрес. Если все задано, можно начать поиск кликнув кнопку с надписью _Начать_. Если поиск
затянулся, его можно остановить кликнув на _Остановить_. Процесс поиска сопровождается движением
полоски индикатора выполнения. Также в окне будут появляться обнаруженные устройства. Их можно
добавить в общий список устройств кликнув по символу плюс рядом с устройством.

> Если адрес устройства перечислен в свойствах экрана, его поиск будет осуществляться автоматически.

#### <a id="telemetry-anchor"></a>Вкладка _Телеметрия_

Для некоторых устройств/видеоэкранов доступно получение телеметрии от каждого модуля, которая может
содержать такие параметры как:

- напряжение
- температура
- версия прошивки
- цветовые координаты
- и т.д.

На панели инструментов вкладки _Телеметрия_ доступны следующие действия:

<dl>
  <dt><Filter4Icon /> Выбрать запрашиваемые переменные</dt>
  <dd>Вызывает диалог выбора интересующих параметров (отображает количество выбранных параметров)</dd>

  <dt><RefreshIcon /> Запустить опрос модулей</dt>
  <dd>Запускается запрос данных телеметрии указанного диапазона экрана</dd>
</dl>

Также используя слайдеры можно задать диапазон опрашиваемых модулей по рядам и строкам (на некоторых
устройствах может быть недоступно).

В процессе опроса данные телеметрии будут выдаваться в табличном виде.

> Чем больше запрашиваемых параметров тем дольше производится опрос. Указывайте только интересуемые
> параметры.

#### <a id="firmware-anchor"></a>Вкладка _Прошивка_

Это экспериментальная возможность и предназначена только для специалистов!

### <a id="output-anchor"></a>Вывод

Если выбрать данный пункт в НП, то слева можно увидеть список переключателей тестовых режимов, а
справа вкладки с доступными экранами и их параметрами. Включение/выключение переключателя
отображает/скрывает динамический тест на выбранном экране.

На панели инструментов расположены следующие элементы:

<dl>
  <dt><BrightnessAutoIcon /> Автояркость</dt>
  <dd>Включает/выключает режим автояркости для выбранного экрана. Если экран в режиме автояркости, то вы не можете указать индивидуальную яркость, она задается централизованно</dd>

  <dt>**75%** Текущая яркость</dt>
  <dd>Отображает текущую яркость в процентах</dd>

  <dt><Brightness4Icon /> Уменьшить на единицу</dt>
  <dd>Уменьшает яркость на один процентный пункт. Не активен в режиме автояркость</dd>
  
  <dt>**Слайдер/ползунок**</dt>
  <dd>Задать яркость. Не активен в режиме автояркость</dd>
  
  <dt><BrightnessHighIcon /> Увеличить на единицу</dt>
  <dd>Увеличивает яркость на один процентный пункт. Не активен в режиме автояркость</dd>

  <dt><LockIcon /> Разблокировать/заблокировать изменения</dt>
  <dd>Так как свойства экрана меняются достаточно редко, то чтобы настройки не сбились, перед внесением правок необходимо сначала разблокировать свойства экрана</dd>
</dl>

Перед внесением изменений разблокируйте свойства из панели инструментов. После разблокировки можно
создать новый экран кликнув на вкладке по символу <AddToQueue /> или удалить его <CloseIcon />.

Параметры позволяют задать размеры экрана в пикселях, размеры модуля/платы, отступ верхнего левого
угла экрана и дисплей, на который выводить изображение. Дисплей можно указать как _основной_ или
_второстепенный_, либо по его идентификатору. Чтобы узнать идентификатор дисплея, его необходимо
подключить, тогда его номер отобразится в списке доступных.

Также важно задать логические или сетевые адреса минихостов, если вы хотите централизованно
управлять их яркостью и другими параметрами. Каждый экран должен содержать непересекающийся список
адресов. Устройства с указанными адресами будут автоматически обнаружены и включены в список
устройств.

Параметр _Коэффициент_ автояркости может помочь, когда в режиме автояркость используются несколько
экранов с различной абсолютной яркостью. Яркость данного экрана будет рассчитана как общая яркость
(в пункте _Автояркость_) умноженная на указанный коэффициент. Если этот коэффициент равен нулю,
яркость экрана управляется индивидуально и не зависит от общей яркости.

### <a id="autobrightness-anchor"></a>Автояркость

В левой части находится переключатель, который активирует режим автояркости. В этом режиме текущая
яркость рассчитывается на основе данных, поступающих от внешнего датчика освещенности. Полученные
данные об освещенности в люксах отображаются на полукруглой логарифмической шкале в верхней части
окна.

Под циферблатом находится таблица соответствия между освещенностью и яркостью.
Задайте *контрольные точки* зависимости яркости от данных датчика освещенности. Обратите внимание,
что данные точки должны описывать *монотонную функцию* т.е. при возрастании освещенности, яркость не
может убывать. Также для задания показаний освещенности используйте логарифмическую шкалу, например:
100, 1000, 10000 люкс.

> Не обязательно заполнять всю таблицу, но два крайних значения являются обязательными - это
> минимальная и максимальная яркость. Также освещенность и яркость должны возрастать для каждой
> строки таблицы. Текущий уровень яркости будет вычисляться с помощью интерполяции заданных значений
> и лежать в диапазоне от минимальной до максимальной указанной яркости.

Если датчик освещенности отсутствует или неисправен, текущая яркость может быть рассчитана по высоте
солнца. Для этого вам необходимо задать текущие координаты GPS кликнув по иконке <LocationOnIcon />
(если координаты не заданы, рядом с иконкой справа будет отображаться круглая точка для напоминания).
В этом случае также нужно указать два крайних значения в таблице: минимальную и максимальную яркость.

> Обратите внимание, что точные координаты должны быть записаны в десятичной нотации, а не в минутах
> и секундах!

В правом углу отображается текущая общая яркость и слайдер, с помощью которого можно ее изменять,
если не включен режим автояркости. Данная яркость будет применена ко всем экранам, для которых
включен режим автояркости (параметр _Коэффициент автояркости_ отличен от нуля).

Вы можете посмотреть историю изменения яркости за последние сутки кликнув по иконке <TimelineIcon />.
Если были заданы GPS-координаты, то в отрывшемся диалоге будут также будут указаны время начала рассвета, восхода, захода
и т.д. А на графике эти промежутки будут выделены цветом (более светлым днем и темным ночью). Если присутствует
датчик освещения, то его показания также будут присутствовать на графике.

Слева логарифмическая шкала освещенности, а справа шкала яркости в процентах.
Под графиком в легенде можно кликать по названиям показаний и включать/отключать отображение соответствующих
показаний. Также можно выделить мышкой диапазон на графике и он отобразится в увеличенном масштабе. Вернуться
в суточный масштаб можно кликнув по кнопке `Сутки`. Если поднести курсор к линии графика во всплывающей подсказке
отобразится время и значение записанного показания.

Чтобы вернуться в основное окно, кликните по кнопке `На главную`.


### <a id="overheat-anchor"></a>Защита от перегрева

Активируется переключателем. Защита от перегрева работает следующим образом: через определенный
_интервал_ времени считывается температура со всех модулей экрана. Далее, в зависимости от заданного
параметра _температуры_ выбирается _максимальное_, _среднее_ или _медианное_ значение и, если оно
превышает _нижнюю границу_ температурного диапазона, яркость экрана уменьшается на указанный _шаг
понижения_. Если в следующем опросе повышение температуры прекратилось, яркость не меняется. Если
температура продолжает расти или она превысила _верхнюю границу_, яркость понижается еще на один
шаг. Если температура опустилась за _нижнюю границу_, яркость начинает возвращаться к желаемому
значению также пошагово.

> Важное замечание: яркость в интерфейсе приложения - это, так называемая, желаемая яркость. Если
> включена защита от перегрева, реальная яркость может быть меньше. Ее реальное значение можно
> увидеть в свойствах устройства.

### <a id="log-anchor"></a>Журнал

В журнал записывается различная отладочная информация.

На панели инструментов есть кнопка вызова диалогового окна, которое позволяет выбрать уровень
логирования пересылаемых пакетов и может быть использовано разработчиками.

### <a id="remote-control"></a>Удаленное управление

Запущенные экземпляры программы на устройствах в локальной сети (в
рамках одной подсети) могут автоматически обнаруживать друг друга. Все обнаруженные устройства
перечислены в меню _GMIB_ как имя хоста с IP-адресом. При выборе указанного
пункта открывается новое окно и происходит подключение к удаленному хосту. Если это первое
подключение, то запрашивается пароль. При удачном подключении пароль сохраняется и больше не
запрашивается до его явной смены или сброса всех установок на одном из хостов.

> Все запросы к удаленному хосту подписываются, и важно, чтобы время
> на обоих устройствах было синхронизировано. Если аутентификация не проходит убедитесь, что время
> на устройствах совпадает.

В заголовке нового окна отображается имя и адрес удаленного хоста.
Теперь вы можете управлять подключенными устройствами, как будто вы находитесь за удаленным
компьютером. Если удаленное устройство находится в другой подсети, Вы можете добавить его в список
самостоятельно выбрав в меню _Изменить список..._, откроется диалог в котором Вы можете отредактировать
список пользовательских удаленных хостов.

> Для удаленного взаимодействия используются по умолчанию TCP-порты 9001 и 9002. Брандмауэр и политика
> вашей сети должны разрешить ПО использовать эти соединения. Если необходимо использовать другие
порты, задайте переменную окружения NIBUS_PORT, в этом случае будут использоваться порты NIBUS_PORT
и NIBUS_PORT+1.

## <a name="player"></a> Плеер

Часто в качестве подключенного оборудования используются видеоэкраны, поэтому функционал ПО был расширен
и доработан для возможности вывода на них медиаконтента. Чтобы открыть окно с плеером выберите нужный вам
плеер в меню _Плеер_. Каждый плеер открывается в отдельном окне со своим именем в заголовке (если это удаленное
подключение, то заголовок также содержит имя удаленного хоста), Предыдущее окно, при этом, можно закрыть. Чтобы
открыть его повторно, выберите его в меню _GMIB_. Чтобы подключится к плееру на удаленном хосте,
сначала подключитесь, как обычно, к удаленному хосту из меню _GMIB_, а затем уже в окне с удаленным хостом выберите
также в меню _Плеер_ нужный вам плеер.

> Если Вы еще не настроили параметры плеера, Вы можете обратится к разделу [Настройка плеера](#player-settings)

### <a name="playback"></a>Вкладка _Воспроизведение_

С левой стороны окна Вы увидите _Окно Просмотра_ и под ним _Активный Плейлист_, а справой _Панель Инструментов_ и
под ней _Редактор Плейлистов_. При первом открытии в **РП** будет открыт _Активный Плейлист_ или первый найденный.

> _Активный Плейлист_ - тот который будет выводится на экран.
> _Текущий Плейлист_ - тот который выбран в _Редакторе Плейлистов_. 

На _Панели Инструментов_ расположены следующие элементы:

<dl>
  <dt><NoteIcon /> Новый плейлист</dt>
  <dd>Создать новый плейлист с именем по умолчанию "Новый плейлист-индекс"</dd>
  <dt><FileCopyIcon /> Создать копию</dt>
  <dd>Создать копию текущего плейлиста с тем же именем с индексом отличающимся на единицу</dd>
  <dt><SmartDisplayIcon /> Сменить плейлист на экране</dt>
  <dd>Меняет _Активный Плейлист_ в плеере на _Текущий Плейлист_ </dd>
  <dt><DeleteIcon /> Удалить плейлист</dt>
  <dd>Удаляет _Текущий Плейлист_, держите клавишу `Shift` при удалении</dd>
  <dt><PlaylistAddIcon /> Добавить в плейлист</dt>
  <dd>Открывает [диалог](#media-dialog) для добавления загруженных медиа-файлов в плейлист (
          как загрузить файлы рассказывается в разделе [Медиатека](#media))</dd>
  <dt><ClearAllIcon /> Очистить плейлист</dt>
  <dd>Удаляет из _Текущего Плейлиста_ все медиа-файлы</dd>
  <dt><ShuffleIcon /> Перемешать плейлист</dt>
  <dd>Перемешивает _Текущий Плейлист_, стараясь распределить одинаковые файлы равномерно</dd>
</dl>

Под **ПИ** находится выпадающий список в котором можно выбрать _Текущий Плейлист_ для редактирования.
Там же можно изменить название **ТП**. Под названием **ТП** находится список с его содержимым. Каждый
элемент списка содержит:
  - иконку
  - порядковый номер в плейлисте
  - имя файла при загрузке, возможно с добавлением индекса, если существует другой файл с тем же именем
  - длительность видео \[Ч:\]ММ:СС
  - размер файла
  - разрешение видео
  - дата загрузки

Если элементов в плейлисте несколько, их можно перетаскивать мышью. При наведении курсора мыши, в правой
части элемента появляется иконка <CloseIcon /> кликнув по которой элемент удаляется из плейлиста.

_Окно Просмотра_, как уже понятно, используется для контроля и просмотра текущего воспроизведения.

> Удаленное подключение. При удаленном подключении контент в _Окне Просмотра_ может незначительно запаздывать, по сравнению с реальным,
> из-за необходимости потоковой передачи с удаленного устройства. Также качество видео в окне намеренно занижено,
> чтобы не нагружать канал, частота кадров также может быть ниже оригинала, возможны пропуски при слабом канале связи.

Когда воспроизведение остановлено в нижней части **ОП** видны стандартные элементы управления
и контроля воспроизведения. Также управляющие элементы видны при наведении курсора мыши на **ОП**.

<dl>
  <dt><PlayArrowIcon />/<PauseIcon /> Воспроизведение/Пауза</dt>
  <dd>Начать воспроизведение с текущей позиции в _Активном Плейлисте_ или включить паузу</dd>
  <dt><SkipNextIcon /> Пропустить</dt>
  <dd>Пропустить текущую композицию и перейти к следующей</dd>
  <dt><StopIcon /> Стоп</dt>
  <dd>Остановить воспроизведение, вернуться в начало плейлиста</dd>
  <dt>Ползунок</dt>
  <dd>Текущая относительная позиция в воспроизводимой композиции</dd>
  <dt>Время</dt>
  <dd>Оставшееся время воспроизведения текущей композиции</dd>
  <dt><PictureInPictureAltIcon /> Картинка-в-картинке</dt>
  <dd>Включает/отключает режим картинка-в-картинке, когда воспроизводимый контент отображается поверх открытых окон на рабочем столе обычно в нижней правой части (можно перетащить). Удобно для контроля</dd>
</dl>

Под _Окном Просмотра_ расположен список композиций _Активного Плейлиста_ с заголовком
из названия плейлиста. Справа названия расположена иконка <CloseIcon />
кликнув по которой можно остановить воспроизведение и сбросить _Активный Плейлист_.
Кликнув по любому элементу списка Вы сделаете его текущим и запустите воспроизведение.

### <a name="add-media-dialog"></a> Диалог добавления медиа-файлов в плейлист

> Как загрузить файлы рассказывается в разделе [Медиатека](#media)

Чтобы выбрать/отменить файл для добавления в _Текущий Плейлист_ кликните по элементам списка.
Если нужно добавить один и тот же файл более одного раза, кликайте по иконкам + и -
в правой части элемента и там же будет видно количество добавлений. В нижней части диалога
есть поле для фильтрации и поиска файлов по имени. Новые файлы будут добавлены в конец **ТП**.

### <a name="media"></a> Вкладка _Медиатека_

Файлы из медиатеки можно добавлять в плейлисты. Для этого их надо туда сначала загрузить.
В верхней части окна расположена _Панель Инструментов_, а под ней список загруженных
файлов. Каждый элемент списка содержит:
  - иконку
  - имя файла при загрузке, возможно с добавлением индекса, если существует другой файл с тем же именем
  - длительность видео \[Ч:\]ММ:СС
  - размер файла
  - разрешение видео
  - дата загрузки

Если навести курсор мыши на элемент списка, то справа появится иконка <DeleteIcon />
кликнув по которой с одновременным нажатием клавиши `Shift`, можно удалить файл. Если файл используется
в каком-то плейлисте, появится предупреждающее сообщение и файл не удалится. Чтобы удалить файл нужно
удалить его из всех плейлистов.

В _Панели Инструментов_ доступны следующие действия:

<dl>
  <dt><UploadIcon /> Загрузить медиа</dt>
  <dd>Открывает системный диалог выбора файлов, можно выбрать сразу несколько файлов. Допускаются файлы содержащие видео и изображения</dd>
  <dt><SortIcon /> Сортировка</dt>
  <dd>Позволяет отсортировать список загруженных файлов по _Имени файла_, _Дате загрузки_, _Длительности_, _Размеру файла_ </dd>
  <dt><RefreshIcon /> Обновить</dt>
  <dd>Принудительно обновляет список</dd>
  <dt><SearchIcon /> Поиск</dt>
  <dd>Фильтрация и поиск файлов по имени</dd>
</dl>

> <ReportIcon /> Рекомендуемый тип контейнера для мультимедийных файлов <a href="https://ru.wikipedia.org/wiki/Matroska" target="_blank" rel="noopener noreferrer">MKV</a>.
> Все загруженные файлы будут сохраняться с расширением .mkv и при необходимости будут преобразованы в указанный контейнер.
> Также настоятельно рекомендуется использовать кодеки <a href="https://ru.wikipedia.org/wiki/H.264" title="Википедия" target="_blank" rel="noopener noreferrer">H.264</a>
> или <a href="https://ru.wikipedia.org/wiki/VP9" target="_blank" rel="noopener noreferrer">VP9</a>. Все остальные форматы будут конвертированы в формат H.264.
> Гораздо важнее использовать указанные кодеки, чем формат контейнера, так как при конвертации кодека затрачивается время и может пострадать качество,
> тогда как смена контейнера происходит без потери качества и незатратна по времени. Вполне спокойно можно использовать например
> <a href="https://ru.wikipedia.org/wiki/MPEG-4_Part_14" target="_blank" rel="noopener noreferrer">MP4</a>.

> Все загруженные изображения будут иметь длительность 5 секунд. Если изображение нужно экспонировать дольше,
> поставьте одно и тоже изображение несколько раз подряд. В дальнейшем можно будет выбирать длительность
> показа изображения более гибким способом. 

### <a name="scheduler"></a> Вкладка _Планировщик_

> <EngineeringIcon /> Данный раздел находится в разработке.

### <a name="settings"></a> Вкладка _Настройки_

На данной вкладке можно настроить все Ваши плееры и посмотреть параметры подключенных дисплеев.
В верхней части экрана расположена _Панель Инструментов_, слева древовидное меню со списком плееров
и обнаруженных дисплеев, справа форма с параметрами выбранного пункта.

Можно создать несколько плееров. Все плееры будут перечислены в меню _Плеер_. Каждый будет открываться в отдельном окне.
Медиатека будет общей для всех. У каждого плеера есть параметр _Предпочтительный размер в пикселях_
(обычно это размер экрана, но экранов может быть несколько и разных размеров). Соотношение сторон из
указанных параметров будет использоваться для _Окна Просмотра_. Также за каждым плеером можно закрепить несколько 
_Областей Вывода_ - участки дисплея, куда выводить видео. Таким образом один плеер может **одновременно**
выводить видео на несколько экранов.

> В дальнейшем предполагается, что для каждой области вывода можно будет указать файл с шейдерами
> для организации сложного вывода на нестандартные конструкции, например многогранный &#171;куб&#187;.

На _Панели Инструментов_ можно увидеть следующие доступные действия:

<dl>
  <dt><PlayerMappingIcon /> Добавить область вывода</dt>
  <dd>Открывает диалог добавления _Области Вывода_. Можно задать _Название_ области, выбрать _Дисплей_, на котором она будет расположена, координаты _X_ и _Y_ верхнего правого угла, и _Ширину_ и _Высоту_. Данный пункт активен при выборе плеера</dd>
  <dt><AddPlayerIcon /> Создать новый плеер</dt>
  <dd>Создает новый плеер со значениями по умолчанию. Вы должны выбрать пункт _Плееры_, чтобы активировалось действие</dd>
  <dt><LocationSearchingIcon /> Определить дисплей</dt>
  <dd>Выводит на выбранный дисплей на несколько секунд надпись _Test_ на прозрачном фоне во весь дисплей. Удобно когда у Вас несколько подключенных дисплеев, используется, чтобы определить выбранный дисплей</dd>
  <dt><CachedIcon /> Обновить</dt>
  <dd>Повторно пытается определить подключенные дисплеи. Должен быть выбран пункт _Устройства вывода_ </dd>
</dl>

#### <a name="player-settings"></a> Параметры плеера

<dl>
  <dt>Имя</dt>
  <dd>Укажите название плеера, каким оно будет перечислено в меню _Плеер_ </dd>
  <dt>Ширина</dt>
  <dd>Предпочтительная ширина окна вывода</dd>
  <dt>Высота</dt>
  <dd>Предпочтительная высота окна вывода</dd>
  <dt>Отключить плавное появление</dt>
  <dd>Если не отключить, начало каждого ролика будет плавно проявляться в течении первых 200мс. Используется чтобы подчеркнуть начало следующего ролика</dd>
  <dt>Отключить плавное исчезание</dt>
  <dd>Если не отключить, последний кадр каждого ролика будет плавно затухать в течении 200мс. Используется чтобы подчеркнуть завершение прошедшего ролика</dd>
</dl>

Ниже указанных параметров будут перечислены заданные _Области Вывода_, в правой части каждого элемента расположена
иконка <CloseIcon /> кликнув по которой её можно удалить.

> Если в плейлисте один и тот же ролик идет несколько раз подряд, то между началом и концом повторного показа
> не будут вставлены плавные появление и затухание. Это сделано, чтобы можно было зациклить какое-то действие,
> например развевающийся флаг или увеличить время экспозиции одного изображения.

#### <a name="display-settings"></a> Параметры дисплея

<dl>
  <dt>Имя</dt>
  <dd>Укажите имя каким оно будет отображаться в списках выбора дисплея</dd>
  <dt>Ширина</dt>
  <dd>Ширина дисплея. Справочно, не может изменяться</dd>
  <dt>Высота</dt>
  <dd>Высота дисплея. Справочно, не может изменяться</dd>
  <dt>X</dt>
  <dd>Координата X верхнего правого угла. Справочно, не может изменяться</dd>
  <dt>Y</dt>
  <dd>Координата Y верхнего правого угла. Справочно, не может изменяться</dd>
  <dt>Основной</dt>
  <dd>Выбран, если это основной дисплей в системе. Справочно, не может изменяться</dd>
  <dt>Встроенный</dt>
  <dd>Выбран, если это встроенный дисплей в системе. Справочно, не может изменяться</dd>
</dl>
